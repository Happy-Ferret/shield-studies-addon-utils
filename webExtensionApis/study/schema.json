[
  {
    "namespace": "study",
    "description":
      "Interface for shield studies, for use by `background.js` scripts.",
    "apiVersion": 5,
    "types": [
      {
        "name": "studySetup"
      },
      {
        "name": "weightedVariations"
      },
      {
        "name": "anEnding"
      },
      {
        "name": "telemetrySelectionOptions"
      },
      {
        "name": "prefTypes"
      }
    ],
    "functions": [
      {
        "name": "configure",
        "type": "function",
        "description":
          "Configure the study.  Most things can't work without this",
        "async": true,
        "parameters": [
          {
            "name": "studySetup",
            "type": "object"
          }
        ]
      },
      {
        "name": "simpleDeterministicVariation",
        "returns": "Name of a variation from weightedVariations",
        "async": true,
        "parameters": [
          {
            "name": "weightedVariations",
            "type": "object"
          },
          {
            "name": "fraction",
            "optional": true,
            "type": "Number"
          }
        ]
      },
      {
        "name": "endStudy",
        "parameters": [
          {
            "name": "anEnding"
          },
          {
            "type": "object"
          }
        ],
        "returns": "none"
      },
      {
        "name": "permissions",
        "async": true,
        "returns":
          "object of permissions with keys shield, pioneer, telemetry, 'ok'"
      },
      {
        "name": "userInfo",
        "returns": "object with branch, etc."
      },
      {
        "name": "sendTelemetry",
        "async": true,
        "parameters": [
          {
            "name": "payload",
            "type": "object"
          },
          {
            "name": "type"
          }
        ],
        "returns": "Nothing"
      },
      {
        "name": "getTelemetry",
        "async": true,
        "returns": "Array of Telemetry pings",
        "parameters": [
          {
            "name": "telemetrySelectionOptions",
            "description": "`{ type, n, minTimestamp, headersOnly }`"
          }
        ]
      },
      {
        "name": "setActiveExperiment",
        "async": true,
        "returns": "Nothing",
        "parameters": []
      },
      {
        "name": "unsetActiveExperiment",
        "async": true,
        "returns": "Nothing",
        "parameters": []
      },
      {
        "name": "getPref",
        "parameters": []
      },
      {
        "name": "setPref",
        "returns": "Value.  Unclear for edge cases",
        "parameters": [
          {
            "name": "prefName",
            "type": "string"
          },
          {
            "name": "prefType",
            "type": "string"
          }
        ]
      },
      {
        "name": "surveyUrl",
        "parameters": [
          {
            "name": "baseUrl",
            "type": "string"
          }
        ],
        "returns": "a url with queryArgs appended / mixed"
      },
      {
        "name": "validateJSON",
        "returns": "a validation",
        "parameters": [
          {
            "name": "anObject",
            "type": "object"
          },
          {
            "name": "schema",
            "type": "object"
          }
        ]
      },
      {
        "name": "getTelemetryPings",
        "type": "function",
        "description": "TODO",
        "async": true,
        "parameters": [
          {
            "optional": true,
            "name": "filter",
            "type": "any"
          }
        ]
      },
      {
        "name": "test_studyUtils_firstSeen",
        "type": "function",
        "description": "TODO",
        "async": true,
        "parameters": []
      },
      {
        "name": "test_studyUtils_setActive",
        "type": "function",
        "description": "TODO",
        "async": true,
        "parameters": []
      },
      {
        "name": "test_studyUtils_startup",
        "type": "function",
        "description": "TODO",
        "async": true,
        "parameters": [
          {
            "optional": true,
            "name": "args",
            "type": "any"
          }
        ]
      }
    ]
  }
]
